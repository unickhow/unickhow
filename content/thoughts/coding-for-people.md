---
title: å¯«ç¨‹å¼ä¸åªæ˜¯å°æ©Ÿå™¨èªªè©±
description: Less is not always more.
date: 2024-11-15T20:31:00.000+08:00
schedule:
hidden: false
tags:
  - typescript
  - principles
---

å…ˆå‰ç„¡æ„é–“çœ‹åˆ°ä¸€å€‹æœ‰è¶£çš„æŠ€è¡“è¨Žè«–ï¼šã€Œå¥½çš„ç¨‹å¼ç¢¼ä¸éœ€è¦è¨»è§£ã€ã€‚é€™å€‹èªªæ³•ä¹è½ä¹‹ä¸‹ä¼¼ä¹Žå¾ˆæœ‰é“ç†ï¼Œä½†å¯¦å‹™ç¶“é©—å‘Šè¨´æˆ‘ï¼Œäº‹æƒ…ä¸¦éžå¦‚æ­¤ç°¡å–®ï¼Œå› æ­¤è—‰é€™å€‹æ©Ÿæœƒåˆ†äº«ä¸€ä¸‹æˆ‘èªç‚ºå¯«ç¨‹å¼çš„å¹¾å€‹åŽŸå‰‡ã€‚

## ç‚ºä»€éº¼æˆ‘å€‘éœ€è¦è¨»è§£ï¼Ÿ

åœ¨ç†æƒ³ä¸–ç•Œä¸­ï¼Œæ¯ä¸€è¡Œç¨‹å¼ç¢¼éƒ½æ‡‰è©²æ˜¯è‡ªè§£é‡‹çš„ï¼ˆself-explanatoryï¼‰ã€‚ä½†å¯¦å‹™ä¸Šçš„è»Ÿé«”é–‹ç™¼å¾€å¾€å……æ»¿äº†å„ç¨®ç‰¹æ®Šéœ€æ±‚å’Œæ¥­å‹™é‚è¼¯ï¼Œé€™äº›é‚è¼¯å¯èƒ½ä¸¦ä¸é‚£éº¼ç›´è§€ã€‚èˆ‰ä¾‹ä¾†èªªï¼š

- æŸå€‹ç‰¹æ®Šçš„è¨ˆç®—é‚è¼¯å¯èƒ½æ˜¯å› æ‡‰äº†ç‰¹å®šçš„æ¥­å‹™è¦å‰‡
- æŸå€‹çœ‹ä¼¼ç¹žé è·¯çš„å¯¦ä½œå¯èƒ½æ˜¯ç‚ºäº†è™•ç†æ¥µç«¯æ¡ˆä¾‹
- æŸå€‹æš«æ™‚æ€§çš„è§£æ±ºæ–¹æ¡ˆå¯èƒ½æ˜¯è€ƒæ…®åˆ°äº†ç³»çµ±é™åˆ¶

åœ¨é€™äº›æƒ…æ³ä¸‹ï¼Œé©ç•¶çš„è¨»è§£ä¸åƒ…èƒ½å¹«åŠ©å…¶ä»–é–‹ç™¼è€…ç†è§£ç¨‹å¼ç¢¼çš„ç”¨æ„ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒèƒ½å¹«åŠ©ã€Œæœªä¾†çš„è‡ªå·±ã€ç†è§£ç•¶åˆçš„æ±ºç­–ç†ç”±ã€‚

## Code Review çš„çœŸæ­£åƒ¹å€¼

å¾ˆå¤šäººèªç‚º code review ä¸»è¦æ˜¯ç‚ºäº†æ‰¾å‡ºç¨‹å¼ç¢¼ä¸­çš„éŒ¯èª¤ã€‚ä½†äº‹å¯¦ä¸Šï¼Œã€ŒéŒ¯èª¤ã€çš„å®šç¾©æœƒå› æ™‚ç©ºèƒŒæ™¯è€Œæœ‰æ‰€å·®ç•°ï¼Œæ²’æœ‰äººèƒ½å¯«å‡ºå®Œç¾Žç„¡ç¼ºçš„ç¨‹å¼ç¢¼ã€‚éŽåŽ»é¢è©¦çš„ç¶“é©—ä¹Ÿé¡¯ç¤ºï¼Œæœ‰äº›äººæŠ±æŒ **åªæœ‰è³‡æ·±å·¥ç¨‹å¸«æ‰èƒ½å‘ä¸‹ code review**ã€‚
ç„¶è€Œï¼Œæˆ‘èªç‚º code review æœ€é‡è¦çš„åŠŸèƒ½å…¶å¯¦æ˜¯ã€Œè³‡è¨ŠåŒæ­¥ ðŸ”ã€ã€‚

é€éŽ code review é€™å€‹éŽç¨‹ï¼Œåœ˜éšŠæˆå“¡èƒ½å¤ :

- åˆ†äº«ç³»çµ±ç¾æ³çš„çŸ¥è­˜
- åŒæ­¥å°æ¥­å‹™é‚è¼¯çš„ç†è§£
- é é˜²å¯èƒ½çš„èª¤è§£å’Œé‡å·¥
- å»ºç«‹å…±åŒçš„åœ˜éšŠèªçŸ¥

å› æ­¤ï¼Œå³ä½¿æ˜¯çœ‹ä¼¼ç°¡å–®çš„æ”¹å‹•ï¼Œä¹Ÿéƒ½å€¼å¾—ç¶“éŽå®Œæ•´çš„ code review æµç¨‹ã€‚å› ç‚ºä¸åŒé–‹ç™¼è€…åœ¨ä¸åŒæ™‚é–“æŽ¥è§¸ç›¸ä¼¼çš„ä¿®æ”¹æ™‚ï¼Œå¦‚æžœç¼ºä¹é€™å€‹è³‡è¨ŠåŒæ­¥ç’°ç¯€ï¼Œå¾ˆå®¹æ˜“å°Žè‡´çŸ¥è­˜æ–·å±¤ï¼Œé€ æˆä¸å¿…è¦çš„å›°æ“¾ã€‚

åˆ†äº«ä¸€å€‹çœŸå¯¦æ¡ˆä¾‹ï¼Œæ›¾ç¶“åœ¨å°ˆæ¡ˆä¸­ï¼Œæˆ‘å€‘æœ‰ä¸€å€‹ä¸‹æ‹‰å¼é¸å–®ï¼ŒåŽŸæœ¬æ˜¯ç”±å‰ç«¯ç¶­è­·ä¸¦è² è²¬ç®¡ç†å¤šèªžç³»ç¿»è­¯ã€‚å¾Œä¾†å› ç‚ºéœ€æ±‚è®Šæ›´ï¼Œæ”¹ç‚ºç”±å¾Œç«¯ API å‹•æ…‹æä¾›é¸é …å…§å®¹ã€‚é€™å€‹æ”¹å‹•å°Žè‡´å‰ç«¯çš„ç¿»è­¯å­—å…¸æª”ä¸­çš„ç›¸é—œå…§å®¹å¯¦éš›ä¸Šå·²ç¶“å¤±åŽ»ä½œç”¨ï¼Œä½†ç”±æ–¼æ™‚ç¨‹ç·Šæ¹Šï¼Œè² è²¬æ”¹å‹•çš„é–‹ç™¼è€…ä¸¦æ²’æœ‰ç§»é™¤é€™äº›éŽæ™‚çš„ç¿»è­¯å…§å®¹ï¼Œè€Œé€™å€‹ PR ç•¶æ™‚ä¹Ÿåªæœ‰æˆ‘çœ‹éŽï¼Œå…¶ä»–äººå¯èƒ½æ˜¯å› ç‚ºéœ€æ±‚ç°¡å–®ï¼Œæˆ–ç”šè‡³æ”¹å‹•ä¸å¤šçš„é—œä¿‚æ²’çœ‹ã€‚
ä¸ä¹…ä¹‹å¾Œï¼Œå¦ä¸€ä½å‰ç«¯å·¥ç¨‹å¸«æŽ¥åˆ°äº†ä¸€å¼µæ–°ç¥¨ï¼šã€Œèª¿æ•´é¸å–®ä¸­çš„æŸæ®µæ–‡å­—ã€ã€‚ç”±æ–¼æ²’æœ‰åŒæ­¥å…ˆå‰æ”¹å‹•è³‡è¨Šçš„é—œä¿‚ï¼Œé€™ä½åŒäº‹å¾ˆè‡ªç„¶åœ°ä¿®æ”¹äº†å„èªžç³»å­—å…¸æª”ä¸­çš„æ–‡å­—ä¸¦æäº¤äº† PRã€‚é€™å€‹æ”¹å‹•ä¸åƒ…æ²’æœ‰å¯¦éš›æ•ˆæžœï¼ˆå› ç‚ºæ–‡å­—æ˜¯ç”±å¾Œç«¯æä¾›ï¼‰ï¼Œæ›´ç³Ÿçš„æ˜¯é€éŽé€™å€‹ PR å¯ä»¥å¾—çŸ¥ä¿®æ”¹è€…æ ¹æœ¬ä¹Ÿæ²’ç¢ºèªéŽç•«é¢æ˜¯å¦ç¬¦åˆé æœŸï¼Œç„¶å¾Œå°±æ“…è‡ªåˆä½µäº† ðŸ¤¯Â é€™æ¨£çš„ PR é‚„æœ‰æ„ç¾©å—Žï¼Ÿ

## TypeScriptï¼šæ›´å¥½çš„é–‹ç™¼é«”é©—

èªªåˆ°æå‡ç¨‹å¼ç¢¼å¯è®€æ€§ï¼Œä¸å¾—ä¸æåˆ° TypeScriptã€‚å³ä½¿ä¸æ˜¯å¾ˆç†Ÿæ‚‰æ³›åž‹æˆ–å…¶ä»–é€²éšŽç‰¹æ€§ï¼ŒTypeScript çš„åž‹åˆ¥ç³»çµ±ä¹Ÿç‚ºæˆ‘å¸¶ä¾†äº†é¡¯è‘—çš„é–‹ç™¼é«”é©—æå‡ã€‚

åœ¨ä½¿ç”¨ JavaScript æ™‚ï¼Œè¦ç†è§£ä¸€å€‹å±¬æ€§å¯èƒ½çš„å€¼ï¼Œå¾€å¾€éœ€è¦ç¿»éæ•´å€‹ç¨‹å¼ç¢¼åº«ã€‚ä½†åœ¨ TypeScript ä¸­ï¼š

- åž‹åˆ¥å®šç¾©æ¸…æ™°åœ°å‘Šè¨´æˆ‘å€‘å¯èƒ½çš„å€¼
- å¯ä»¥å¿«é€Ÿè¿½æº¯åž‹åˆ¥çš„ä¾†æº
- IDE çš„æ”¯æ´è®“é–‹ç™¼æ›´æœ‰æ•ˆçŽ‡

åœ¨é–‹ç™¼è·¯ä¸Šï¼Œæˆ–å¤šæˆ–å°‘éƒ½çœ‹éŽå¾Œç«¯çµ¦å‡ºé€™ç¨®ç‹€æ…‹ç¢¼

```jsx
status: 0 // inactive
status: 1 // active
status: 2 // deleted
```

åœ¨æ²’æœ‰åž‹åˆ¥ç³»çµ±çš„æƒ…æ³ä¸‹ï¼Œè¦ç†è§£é€™å€‹ status å¯èƒ½çš„å€¼ï¼Œæˆ‘å€‘éœ€è¦ï¼š

1. ç¿»éä½¿ç”¨é€™å€‹å±¬æ€§çš„æ‰€æœ‰ç¨‹å¼ç¢¼
2. æŸ¥çœ‹ API æ–‡ä»¶ï¼ˆå¦‚æžœæœ‰çš„è©±ï¼‰
3. æˆ–æ˜¯ç›´æŽ¥è©¢å•å¾Œç«¯åŒäº‹

ä½†ä½¿ç”¨ TypeScriptï¼Œæˆ‘å€‘å¯ä»¥æŠŠå·²çŸ¥ç‹€æ³å…ˆå®šç¾©æ¸…æ¥šï¼ŒæŠŠæ•¸å­—è®Šæˆæœ‰æ„ç¾©çš„ enum ä¾†å¢žåŠ å¯è®€æ€§

```jsx
enum UserStatus {
  Inactive = 0,
  Active = 1,
  Deleted = 2,
}
```

## çµè«–

æˆ‘å€‘è¦èªçŸ¥åˆ°ç¨‹å¼ç¢¼çš„ç¬¬ä¸€è®€è€…å…¶å¯¦æ˜¯**äºº**ï¼Œè€Œä¸æ˜¯é›»è…¦ã€‚é›»è…¦åªé—œå¿ƒæŒ‡ä»¤æ˜¯å¦æ­£ç¢ºï¼Œä½†äººéœ€è¦ç†è§£ç¨‹å¼ç¢¼èƒŒå¾Œçš„æ€ç¶­å’Œæ„åœ–ã€‚é€™å°±æ˜¯ç‚ºä»€éº¼æˆ‘å€‘æ‡‰è©²æ‘’æ£„ `aa`ã€`bb_1` é€™ç¨®æ¯«ç„¡æ„ç¾©çš„å‘½åæ–¹å¼ï¼Œå› ç‚ºç¯€çœæ‰“å­—çš„å¹¾ç§’é˜ï¼Œå¯èƒ½æœƒè®“ä¹‹å¾Œçš„é–±è®€è€…èŠ±è²»æ•¸å€çš„æ™‚é–“ä¾†ç†è§£ç¨‹å¼ç¢¼çš„ç”¨æ„ã€‚

å¾ˆå¤šé–‹ç™¼è€…æœƒèªªï¼šã€Œé€™æ˜¯æˆ‘çš„å€‹äººå°ˆæ¡ˆï¼Œä¸éœ€è¦å¯«å¾—é‚£éº¼è¬›ç©¶ã€‚ã€ä½†å¯¦éš›ä¸Šï¼Œæˆ‘å€‘æ°¸é éƒ½åœ¨è·Ÿã€Œæœªä¾†çš„è‡ªå·±ã€å”ä½œã€‚å…­å€‹æœˆå¾Œå†å›žä¾†çœ‹ç¨‹å¼ç¢¼çš„ä½ ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯å¦ä¸€å€‹é–‹ç™¼è€…ã€‚ç•¶ä½ å¿…é ˆä¿®æ”¹åŠå¹´å‰å¯«çš„ç¨‹å¼ç¢¼æ™‚ï¼Œä½ æœƒéžå¸¸æ„Ÿè¬ç•¶åˆé‚£å€‹å¯«ä¸‹æ¸…æ¥šè¨»è§£çš„è‡ªå·±ã€‚å¥½çš„ç¨‹å¼ç¢¼ç¿’æ…£ä¸è©²å› å°ˆæ¡ˆè¦æ¨¡è€Œæ‰“æŠ˜ã€‚

TypeScript çš„ç¢ºç‚ºæˆ‘å€‘å¸¶ä¾†äº†æ›´å¥½çš„é–‹ç™¼é«”é©—ï¼Œä½†é€™ä¸è¡¨ç¤ºæˆ‘å€‘å°±å¯ä»¥å®Œå…¨æ‹‹æ£„è¨»è§£ã€‚åž‹åˆ¥ç³»çµ±å‘Šè¨´æˆ‘å€‘è³‡æ–™çš„çµæ§‹å’Œé™åˆ¶ï¼Œä½†å®ƒç„¡æ³•èªªæ˜Žå•†æ¥­é‚è¼¯èƒŒå¾Œçš„åŽŸå› ã€‚TypeScript å’Œè¨»è§£æ‡‰è©²æ˜¯ç›¸è¼”ç›¸æˆçš„é—œä¿‚ï¼Œä¸€å€‹å‘Šè¨´æˆ‘å€‘ã€Œæ˜¯ä»€éº¼ (What)ã€ï¼Œä¸€å€‹å‘Šè¨´æˆ‘å€‘ã€Œç‚ºä»€éº¼ (Why)ã€ã€‚ç‰¹åˆ¥æ˜¯åœ¨æ²’æœ‰ TypeScript çš„å°ˆæ¡ˆä¸­ï¼Œæ¸…æ¥šçš„è¨»è§£æ›´é¡¯é‡è¦ã€‚

è€Œ code review çš„éŽç¨‹ï¼Œä¸æ‡‰è©²è¢«ç°¡åŒ–ç‚ºæ‰¾å‡ºç¨‹å¼ç¢¼ä¸­çš„éŒ¯èª¤ã€‚å®ƒæ˜¯çŸ¥è­˜å‚³éžçš„é‡è¦ç®¡é“ï¼Œæ˜¯åœ˜éšŠåŒæ­¥è³‡è¨Šçš„é—œéµæ™‚åˆ»ã€‚å°±ç®—æ˜¯å¾®å°çš„æ”¹å‹•ï¼Œä¹Ÿå¯èƒ½è—æœ‰é‡è¦çš„æ¥­å‹™é‚è¼¯æ›´å‹•ã€‚é€éŽå®Œæ•´çš„ review æµç¨‹ï¼Œæˆ‘å€‘ä¸åªæ˜¯åœ¨å¯©è¦–ç¨‹å¼ç¢¼ï¼Œæ›´æ˜¯åœ¨å»ºç«‹åœ˜éšŠçš„å…±åŒèªçŸ¥ã€‚

æœ€å¾Œï¼Œç¨‹å¼é–‹ç™¼æ˜¯ä¸€é–€æºé€šçš„è—è¡“ã€‚å¥½çš„ç¨‹å¼ç¢¼æ‡‰è©²åƒä¸€ç¯‡å¥½æ–‡ç« ï¼Œé‚è¼¯æ¸…æ™°ï¼Œçµæ§‹åˆ†æ˜Žï¼Œè®“è®€è€…èƒ½å¤ è¼•æ˜“ç†è§£ä½œè€…çš„æ„åœ–ã€‚ä¸ç®¡æ˜¯è®Šæ•¸å‘½åã€åž‹åˆ¥å®šç¾©ã€ç¨‹å¼è¨»è§£ï¼Œé‚„æ˜¯ review æµç¨‹ï¼Œé€™äº›éƒ½ä¸æ˜¯é¡å¤–çš„è² æ“”ï¼Œè€Œæ˜¯å¯«çµ¦äººçœ‹çš„å¿…è¦å…ƒç´ ã€‚ç•¢ç«Ÿï¼Œç¨‹å¼ç¢¼çµ‚ç©¶æ˜¯è¦çµ¦äººé–±è®€çš„ï¼Œè€Œä¸æ˜¯å–®ç´”åœ°çµ¦æ©Ÿå™¨åŸ·è¡Œã€‚

> for en version: <a href="/thoughts/coding-for-people-en">Writing code for people, not computers</a>
